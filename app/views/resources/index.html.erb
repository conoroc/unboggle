<% provide(:title, 'Resources') %>
<div class="row">
  <aside class="span2">
    <%= render 'layouts/side_nav' %>
  </aside>
  <div class="span10 opaque">

    <%= search_form_for @search do |f| %>
        <div class="search">
          <%= f.label :title_cont, "Title Contains" %>
          <%= f.text_field :title_cont %>
        </div>
        <div class="actions"><%= f.submit "Search" %></div>
    <% end %>

    <h1>Listing Resources</h1>

    <table class="table table-hover table-bordered">
      <tr>
        <th><%= sort_link @search, :title, "Title" %></th>
        <th>Source</th>
        <th>Category</th>
        <th>Level</th>
        <th>Year</th>
        <th>Cost</th>
        <th>Medium</th>
        <th>Rating</th>
        <th>Description</th>
      </tr>

      <% @resources.each do |resource| %>
          <tr>
            <td><%= link_to resource.title, resource %></td>
            <td><%= resource.source %></td>
            <td><%= resource.category.name %></td>
            <td><%= resource.level %></td>
            <td><%= resource.year %></td>
            <td><%= resource.cost %></td>
            <td><%= resource.medium %></td>
            <td><%= resource.rating %></td>
            <td><%= resource.description.truncate(20) %></td>
          </tr>
      <% end %>
    </table>
    <br/>

  </div>
</div>
